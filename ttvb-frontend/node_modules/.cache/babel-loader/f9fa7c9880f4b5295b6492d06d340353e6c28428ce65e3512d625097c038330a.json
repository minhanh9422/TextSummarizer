{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import apiService from\"../services/api\";import Header from\"../components/header\";import\"./HistoryPage.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const HistoryPage=()=>{const[history,setHistory]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(\"\");const navigate=useNavigate();useEffect(()=>{if(!apiService.isAuthenticated()){navigate(\"/login\");return;}loadHistory();},[navigate]);const loadHistory=async()=>{try{setIsLoading(true);const data=await apiService.getHistory();setHistory(data);}catch(error){console.error(\"Error loading history:\",error);setError(\"Kh√¥ng th·ªÉ t·∫£i l·ªãch s·ª≠\");}finally{setIsLoading(false);}};const handleDelete=async id=>{if(!window.confirm(\"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a m·ª•c n√†y?\")){return;}try{await apiService.deleteHistory(id);setHistory(history.filter(item=>item.id!==id));}catch(error){console.error(\"Error deleting history:\",error);alert(\"Kh√¥ng th·ªÉ x√≥a m·ª•c n√†y\");}};const formatDate=dateString=>{return new Date(dateString).toLocaleString(\"vi-VN\");};if(isLoading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"history-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0110ang t\\u1EA3i l\\u1ECBch s\\u1EED...\"})})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"L\\u1ECBch s\\u1EED t\\xF3m t\\u1EAFt\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),history.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-history\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED t\\xF3m t\\u1EAFt n\\xE0o\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),className:\"back-button\",children:\"V\\u1EC1 trang ch\\u1EE7\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:history.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"history-date\",children:formatDate(item.created_at)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id),className:\"delete-button\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"original-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"V\\u0103n b\\u1EA3n g\\u1ED1c:\"}),/*#__PURE__*/_jsx(\"p\",{children:item.original_text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-text\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"T\\xF3m t\\u1EAFt:\"}),/*#__PURE__*/_jsx(\"p\",{children:item.summary_text})]})]})]},item.id))})]})]});};export default HistoryPage;","map":{"version":3,"names":["useState","useEffect","useNavigate","apiService","Header","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HistoryPage","history","setHistory","isLoading","setIsLoading","error","setError","navigate","isAuthenticated","loadHistory","data","getHistory","console","handleDelete","id","window","confirm","deleteHistory","filter","item","alert","formatDate","dateString","Date","toLocaleString","children","className","length","onClick","map","created_at","original_text","summary_text"],"sources":["D:/Projects/TextSummarizer/text-summarizer_v2/ttvb-frontend/src/pages/HistoryPage.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport apiService from \"../services/api\"\nimport Header from \"../components/header\"\nimport \"./HistoryPage.css\"\n\nconst HistoryPage = () => {\n  const [history, setHistory] = useState([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (!apiService.isAuthenticated()) {\n      navigate(\"/login\")\n      return\n    }\n\n    loadHistory()\n  }, [navigate])\n\n  const loadHistory = async () => {\n    try {\n      setIsLoading(true)\n      const data = await apiService.getHistory()\n      setHistory(data)\n    } catch (error) {\n      console.error(\"Error loading history:\", error)\n      setError(\"Kh√¥ng th·ªÉ t·∫£i l·ªãch s·ª≠\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a m·ª•c n√†y?\")) {\n      return\n    }\n\n    try {\n      await apiService.deleteHistory(id)\n      setHistory(history.filter((item) => item.id !== id))\n    } catch (error) {\n      console.error(\"Error deleting history:\", error)\n      alert(\"Kh√¥ng th·ªÉ x√≥a m·ª•c n√†y\")\n    }\n  }\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString(\"vi-VN\")\n  }\n\n  if (isLoading) {\n    return (\n      <>\n        <Header />\n        <div className=\"history-container\">\n          <div className=\"loading\">ƒêang t·∫£i l·ªãch s·ª≠...</div>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Header />\n      <div className=\"history-container\">\n        <h1>L·ªãch s·ª≠ t√≥m t·∫Øt</h1>\n\n        {error && <div className=\"error-message\">{error}</div>}\n\n        {history.length === 0 ? (\n          <div className=\"empty-history\">\n            <p>Ch∆∞a c√≥ l·ªãch s·ª≠ t√≥m t·∫Øt n√†o</p>\n            <button onClick={() => navigate(\"/\")} className=\"back-button\">\n              V·ªÅ trang ch·ªß\n            </button>\n          </div>\n        ) : (\n          <div className=\"history-list\">\n            {history.map((item) => (\n              <div key={item.id} className=\"history-item\">\n                <div className=\"history-header\">\n                  <span className=\"history-date\">{formatDate(item.created_at)}</span>\n                  <button onClick={() => handleDelete(item.id)} className=\"delete-button\">\n                    üóëÔ∏è\n                  </button>\n                </div>\n\n                <div className=\"history-content\">\n                  <div className=\"original-text\">\n                    <h4>VƒÉn b·∫£n g·ªëc:</h4>\n                    <p>{item.original_text}</p>\n                  </div>\n\n                  <div className=\"summary-text\">\n                    <h4>T√≥m t·∫Øt:</h4>\n                    <p>{item.summary_text}</p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default HistoryPage"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
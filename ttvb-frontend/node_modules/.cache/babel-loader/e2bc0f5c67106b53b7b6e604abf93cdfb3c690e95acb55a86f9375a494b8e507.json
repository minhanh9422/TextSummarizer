{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"D:\\\\Projects\\\\TextSummarizer\\\\text-summarizer_v2\\\\ttvb-frontend\\\\src\\\\pages\\\\HistoryPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport apiService from \"../services/api\";\nimport Header from \"../components/header\";\nimport \"./HistoryPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HistoryPage = () => {\n  _s();\n  const [history, setHistory] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!apiService.isAuthenticated()) {\n      navigate(\"/login\");\n      return;\n    }\n    loadHistory();\n  }, [navigate]);\n  const loadHistory = async () => {\n    try {\n      setIsLoading(true);\n      const data = await apiService.getHistory();\n      setHistory(data);\n    } catch (error) {\n      console.error(\"Error loading history:\", error);\n      setError(\"Không thể tải lịch sử\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Bạn có chắc muốn xóa mục này?\")) {\n      return;\n    }\n    try {\n      await apiService.deleteHistory(id);\n      setHistory(history.filter(item => item.id !== id));\n    } catch (error) {\n      console.error(\"Error deleting history:\", error);\n      alert(\"Không thể xóa mục này\");\n    }\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleString(\"vi-VN\");\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u0110ang t\\u1EA3i l\\u1ECBch s\\u1EED...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"L\\u1ECBch s\\u1EED t\\xF3m t\\u1EAFt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 19\n      }, this), history.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-history\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED t\\xF3m t\\u1EAFt n\\xE0o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/\"),\n          className: \"back-button\",\n          children: \"V\\u1EC1 trang ch\\u1EE7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-list\",\n        children: history.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"history-date\",\n              children: formatDate(item.created_at)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDelete(item.id),\n              className: \"delete-button\",\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"original-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"V\\u0103n b\\u1EA3n g\\u1ED1c:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.original_text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"T\\xF3m t\\u1EAFt:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.summary_text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(HistoryPage, \"k3iDaYsOPKQz0i8kUpEsRJP26ME=\", false, function () {\n  return [useNavigate];\n});\n_c = HistoryPage;\nexport default HistoryPage;\nvar _c;\n$RefreshReg$(_c, \"HistoryPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useNavigate","apiService","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","HistoryPage","history","setHistory","isLoading","setIsLoading","error","setError","navigate","isAuthenticated","loadHistory","data","getHistory","console","handleDelete","id","window","confirm","deleteHistory","filter","item","alert","formatDate","dateString","Date","toLocaleString","children","fileName","lineNumber","columnNumber","className","length","onClick","map","created_at","original_text","summary_text","_c","$RefreshReg$"],"sources":["D:/Projects/TextSummarizer/text-summarizer_v2/ttvb-frontend/src/pages/HistoryPage.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport apiService from \"../services/api\"\nimport Header from \"../components/header\"\nimport \"./HistoryPage.css\"\n\nconst HistoryPage = () => {\n  const [history, setHistory] = useState([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (!apiService.isAuthenticated()) {\n      navigate(\"/login\")\n      return\n    }\n\n    loadHistory()\n  }, [navigate])\n\n  const loadHistory = async () => {\n    try {\n      setIsLoading(true)\n      const data = await apiService.getHistory()\n      setHistory(data)\n    } catch (error) {\n      console.error(\"Error loading history:\", error)\n      setError(\"Không thể tải lịch sử\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Bạn có chắc muốn xóa mục này?\")) {\n      return\n    }\n\n    try {\n      await apiService.deleteHistory(id)\n      setHistory(history.filter((item) => item.id !== id))\n    } catch (error) {\n      console.error(\"Error deleting history:\", error)\n      alert(\"Không thể xóa mục này\")\n    }\n  }\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString(\"vi-VN\")\n  }\n\n  if (isLoading) {\n    return (\n      <>\n        <Header />\n        <div className=\"history-container\">\n          <div className=\"loading\">Đang tải lịch sử...</div>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <Header />\n      <div className=\"history-container\">\n        <h1>Lịch sử tóm tắt</h1>\n\n        {error && <div className=\"error-message\">{error}</div>}\n\n        {history.length === 0 ? (\n          <div className=\"empty-history\">\n            <p>Chưa có lịch sử tóm tắt nào</p>\n            <button onClick={() => navigate(\"/\")} className=\"back-button\">\n              Về trang chủ\n            </button>\n          </div>\n        ) : (\n          <div className=\"history-list\">\n            {history.map((item) => (\n              <div key={item.id} className=\"history-item\">\n                <div className=\"history-header\">\n                  <span className=\"history-date\">{formatDate(item.created_at)}</span>\n                  <button onClick={() => handleDelete(item.id)} className=\"delete-button\">\n                    🗑️\n                  </button>\n                </div>\n\n                <div className=\"history-content\">\n                  <div className=\"original-text\">\n                    <h4>Văn bản gốc:</h4>\n                    <p>{item.original_text}</p>\n                  </div>\n\n                  <div className=\"summary-text\">\n                    <h4>Tóm tắt:</h4>\n                    <p>{item.summary_text}</p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default HistoryPage"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}